(this.webpackJsonpbreadbike=this.webpackJsonpbreadbike||[]).push([[0],{14:function(e,t,r){},16:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(6),c=r.n(o),s=(r(14),r(1)),i=r.n(s),l=r(2),u=r(4),p=r(7),d=r.n(p),f=(r(16),r(3));function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(i.a.mark((function e(t,r){var a,n,o,c,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a={},t.forEach((function(e){var t=e.route;if(!t)return!1;a[t]||(a[t]=[]),a[t].push(e)})),n=[],o=0,c=Object.keys(a);case 6:if(!(o<c.length)){e.next=19;break}if(s=c[o],l=a[s],s&&s.toLowerCase){e.next=11;break}return e.abrupt("return",console.log("No key found for data: ",l));case 11:if(!s.includes("Home Delivery -")){e.next=16;break}return e.next=14,b({data:l,name:s.replace("Home Delivery -",l[0].deliveryDate&&k(l[0].deliveryDate)||"")});case 14:u=e.sent,n.push(u);case 16:o++,e.next=6;break;case 19:return e.abrupt("return",n);case 22:return e.prev=22,e.t0=e.catch(0),console.log("Upload failed error:",e.t0),e.abrupt("return",{error:"The upload failed for some reason. Check the console for more info!"});case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(i.a.mark((function e(t){var r,a,n,o,c,s,l,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,a=t.name,t.setResponse,n=y(r),o=n.roadWarriorData,c=n.itemsByType,s="",Object(f.forEach)(c,(function(e,t){s+="".concat(e," ").concat(t,", ")})),!1,"https://tnrich-breadbike.azurewebsites.net/api/HttpTrigger1?code=mZhkt5Td4MFZG0fEtq5PdN4NJWI3UbgSLL6kh9h9BpKAYdzl24MakA%3D%3D",(l=new Headers).append("Content-Type","application/json"),l.append("Content-Type","application/json"),u=JSON.stringify({name:a,roadWarriorData:o,itemCountsDescription:s}),p={method:"POST",headers:l,body:u,redirect:"follow"},e.next=13,fetch("https://tnrich-breadbike.azurewebsites.net/api/HttpTrigger1?code=mZhkt5Td4MFZG0fEtq5PdN4NJWI3UbgSLL6kh9h9BpKAYdzl24MakA%3D%3D",p).then((function(e){console.log("response:",e);var t=e.text();return 202!==e.status?(console.log("error uploading. got a result.error!:",t.statusText),{success:!1,name:a,error:t.statusText}):{success:!0,name:a,result:t}})).catch((function(e){return console.log("error uploading!:",e),{success:!1,name:a,error:e}}));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={"Baker's Choice Rustic Loaf":"Rustic","Baker's Choice Pan Loaf":"Pan","The Rye Loaf":"Rye"};function y(e){var t={},r=Object(f.flatMap)(e,(function(e){try{var r,a=e.address,n=e.city,o=e.firstName,c=e.lastName,s=e.primaryPhone,i=e.secondaryPhone,l=e.state,u=e.zipCode,p="";return Object.keys(e).forEach((function(a){if(a.startsWith("noHeader__")){var n=e[a];if(n){var o=Number(a.replace("noHeader__","").trim());if(o%3===0&&(r=n||""),o%3===2){if(n.includes("Biker's Tip"))return;var c=(v[n]||n.replace("Stepladder Creamery","").replace("Leigh's Bakeshop","")).trim();t[c]=Number(t[c]||0)+Number(r),p+=r+" "+c+" "}}}})),{Name:o+" "+c,Address:"".concat(a," ").concat(n," ").concat(l," ").concat(u),Phone:s||i,Note:p}}catch(d){return console.log("couldn't prettify :",e),[]}}));return{itemsByType:t,roadWarriorData:r}}function k(e){var t=new Date(e);return t.toLocaleString("default",{month:"long"})+" "+(t.getDate()>9?t.getDate():"0"+t.getDate())}var E=r(8),w=r.n(E);var N=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),r=t[0],o=t[1],c=Object(a.useState)([]),s=Object(u.a)(c,2),p=s[0],m=s[1];return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("img",{width:200,height:200,alt:"breadbike logo",src:w.a}),n.a.createElement("h3",null,"Weclome to the breadbike route planner"),n.a.createElement("h5",null,"Drag today's distribution.csv report from farmigo here: "),n.a.createElement("br",null),n.a.createElement("input",{className:"fileInput",onChange:function(e){var t=document.querySelector(".fileInput").files,r=0;d.a.parse(t[0],{header:!0,transformHeader:function(e){return e?Object(f.camelCase)(e):"noHeader__".concat(r++)},complete:function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=4,h(t.data);case 4:r=e.sent,m(r),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},type:"file"}),n.a.createElement("br",null),r&&n.a.createElement("div",{class:"loader"}),!!p.length&&n.a.createElement("h3",null,"Results:"),p.map((function(e,t){var r=e.name,a=e.success,o=e.error,c=e.results;return n.a.createElement("div",{key:t},r," \xa0\xa0"," ",n.a.createElement("span",{style:{color:a?"inherit":"red"}},"Upload Success: ",!!a+"")," ",n.a.createElement("br",null),o?"string"===typeof o?o:JSON.stringify(o,null,2):a?"":"Undetermined error, check the logs"," ",c&&JSON.stringify(c,null,2),n.a.createElement("br",null),n.a.createElement("br",null))})),n.a.createElement("div",null,"Refresh the page to upload new csvs ")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,r){e.exports=r.p+"static/media/breadbike_logo_final.a56f368b.png"},9:function(e,t,r){e.exports=r(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.70567b2d.chunk.js.map